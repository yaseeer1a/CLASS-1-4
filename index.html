<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>تسجيل الدخول - الفصل</title>
<style>
body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align:center; background:#f2f2f2; padding-top:60px;}
.box { width:320px; margin:auto; padding:20px; background:white; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.2);}
input { width:90%; padding:10px; margin:8px 0; border-radius:5px; border:1px solid #ccc;}
button { padding:10px; width:95%; background:#007bff; color:white; border:none; border-radius:6px; cursor:pointer;}
.error { color:red; }
</style>
</head>
<body>

<div class="box">
<h2>🔐 تسجيل الدخول</h2>
<input id="username" placeholder="اسم المستخدم">
<input id="password" type="password" placeholder="كلمة المرور">
<button onclick="login()">دخول</button>
<p id="error" class="error"></p>
</div>

<script>
// الحسابات المخزنة في المتصفح
let users = JSON.parse(localStorage.getItem("users")) || {
  "admin": {pass:"1234", name:"المسؤول العام", role:"admin"},
  "teacher": {pass:"5678", name:"رائد الفصل خالد", role:"teacher"},
  "yasser": {pass:"1111", name:"ياسر عبدالعزيز مونس العنزي", role:"student"},
  "student1": {pass:"2222", name:"أحمد محمد علي العتيبي", role:"student"}
};

// تسجيل دخول تلقائي بعد أول مرة
window.onload = function() {
  const currentUser = JSON.parse(localStorage.getItem("currentUser"));
  if(currentUser){
    if(currentUser.role==="student") window.location.href="student.html";
    else if(currentUser.role==="teacher") window.location.href="teacher.html";
    else window.location.href="admin.html";
  }
};

function login(){
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();
  const err = document.getElementById("error");

  if(users[username] && users[username].pass === password){
    localStorage.setItem("currentUser", JSON.stringify(users[username]));
    if(users[username].role==="student") window.location.href="student.html";
    else if(users[username].role==="teacher") window.location.href="teacher.html";
    else window.location.href="admin.html";
  } else {
    err.innerText = "❌ اسم المستخدم أو كلمة السر غير صحيحة";
  }
}
</script>
</body>
</html>
